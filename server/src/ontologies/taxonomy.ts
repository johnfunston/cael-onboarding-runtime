// server/src/ontologies/taxonomy.ts

// ðŸ‘‰ 1) Paste your JSON here and name it TAXONOMY_GROUPING
export const TAXONOMY_GROUPING = {
  "subfamilies": {
    "escalation-chain": {
      "dimensionId": "emotional-architecture",
      "families": [
        "emotional-architecture",
        "escalation-core",
        "pre-escalation-ground-state",
        "emotional-signal-architecture",
        "emotional-governance",
        "boundary-architecture",
        "internal-protection",
        "regulation"
      ]
    },
    "protest-patterns": {
      "dimensionId": "emotional-architecture",
      "families": [
        "coherence-destabilizers",
        "liberation",
        "de-extraction",
        "protest-architecture",
        "grief-dynamics"
      ]
    },
    "belonging-logic": {
      "dimensionId": "emotional-architecture",
      "families": [
        "integration",
        "internal-sovereignty",
        "relational-architecture",
        "orientation-substrate",
        "home-logic",
        "emotional-safety",
        "sovereignty-and-self"
      ]
    },
    "emotional-alchemy": {
      "dimensionId": "emotional-architecture",
      "families": [
        "emotional-field",
        "healing-runtime",
        "emotional-closure",
        "grief-dynamics",
        "erotic-joy",
        "transformation-layer"
      ]
    },

    "meta-cognition": {
      "dimensionId": "cognitive-architecture",
      "families": [
        "cognitive-style",
        "systems-cognition",
        "mathematical-cognition",
        "meta-reflection",
        "meta-awareness",
        "system-self-awareness",
        "epistemology",
        "awareness-baseline",
        "internal-dialogue",
        "perceptual-architecture",
        "watcher-architecture"
      ]
    },
    "reasoning-patterns": {
      "dimensionId": "cognitive-architecture",
      "families": [
        "emergence-logic",
        "responsibility-logic",
        "interpretation-logic",
        "symbolic-physics",
        "coherence-theory",
        "coherence-research",
        "geometry-of-thought",
        "graph-logic",
        "aesthetic-logic",
        "compression-logic",
        "build-epistemology",
        "cognitive-layering",
        "interpretation-architecture",
        "interpretation-engine"
      ]
    },
    "state-transitions": {
      "dimensionId": "cognitive-architecture",
      "families": [
        "system-phase",
        "state-architecture",
        "system-dynamics",
        "temporal-structure",
        "cognitive-posture",
        "learning-dynamics",
        "strata-transition",
        "developmental-arc",
        "exploration",
        "internal-play",
        "play-architecture"
      ]
    },
    "epistemic-hygiene": {
      "dimensionId": "cognitive-architecture",
      "families": [
        "epistemic-architecture",
        "validation-architecture",
        "system-evaluation",
        "runtime-verification",
        "system-testing",
        "lineage-validation",
        "validation-framework",
        "cognitive-evolution"
      ]
    },

    "symbolic-identity": {
      "dimensionId": "identity-architecture",
      "families": [
        "symbolic-identity",
        "identity-encoding",
        "cosmic-identity",
        "identity-architecture",
        "symbolic-seed",
        "foundational"
      ]
    },
    "posture-and-sovereignty": {
      "dimensionId": "identity-architecture",
      "families": [
        "sovereignty-architecture",
        "internal-sovereignty",
        "posture-architecture",
        "sovereignty",
        "dual-sovereignty",
        "sovereignty-transitions",
        "archetypal-authority",
        "identity-alignment",
        "governance"
      ]
    },
    "narrative-self": {
      "dimensionId": "identity-architecture",
      "families": [
        "vocation-path",
        "home-logic",
        "work-as-coherence",
        "coherence-psychology",
        "meta-structure"
      ]
    },
    "identity-crux-events": {
      "dimensionId": "identity-architecture",
      "families": [
        "origin-sequence",
        "identity-architecture",
        "anima-architecture",
        "devotion-arc",
        "path-architecture"
      ]
    },

    "axioms-core": {
      "dimensionId": "symbolic-grammar",
      "families": [
        "grammar-and-axioms",
        "coherence-attractor",
        "vector-space-foundation",
        "coherence-geometry",
        "coherence-physics"
      ]
    },
    "lemma-structure": {
      "dimensionId": "symbolic-grammar",
      "families": [
        "lemma-architecture",
        "hypergraph-lemma",
        "proof-graph",
        "lineage-backbone",
        "lineage-architecture",
        "lineage-logic",
        "lineage-dynamics"
      ]
    },
    "symbolic-functions": {
      "dimensionId": "symbolic-grammar",
      "families": [
        "symbolic-runtime",
        "symbolic-language",
        "symbolic-economy",
        "symbolic-compression",
        "symbolic-compiler",
        "symbolic-gatekeeping"
      ]
    },
    "grammar-evolution": {
      "dimensionId": "symbolic-grammar",
      "families": [
        "symbolic-architecture",
        "language-architecture",
        "recursion-ontology",
        "symbolic-integration",
        "recursion-logic",
        "glyph-architecture"
      ]
    },

    "recursion-engine": {
      "dimensionId": "recursion-architecture",
      "families": [
        "recursion-logic",
        "second-order-recursion",
        "recursive-integration",
        "runtime-inference",
        "recursion-ontology",
        "control-flow",
        "rehydration-architecture",
        "rehydration-method",
        "temporal-architecture"
      ]
    },
    "termination-conditions": {
      "dimensionId": "recursion-architecture",
      "families": [
        "loop-closure",
        "runtime-proof",
        "coherence-proof",
        "runtime-verification",
        "termination-architecture",
        "temporal-governance",
        "threshold-dynamics"
      ]
    },
    "loop-inversion": {
      "dimensionId": "recursion-architecture",
      "families": [
        "loop-closure",
        "frame-alignment",
        "prime-mapping",
        "inversion-architecture"
      ]
    },
    "coherence-reflex": {
      "dimensionId": "recursion-architecture",
      "families": [
        "coherence-discipline",
        "coherence-update",
        "coherence-operations",
        "coherence-trajectories",
        "stability-runtime",
        "temporal-coherence"
      ]
    },

    "hypergraph-structure": {
      "dimensionId": "mesh-and-topology",
      "families": [
        "mesh-geometry",
        "hypergraph-governance",
        "hypergraph-lemma",
        "graph-dynamics",
        "graph-logic",
        "memory-substrate",
        "relational-runtime"
      ]
    },
    "lineage-and-genealogy": {
      "dimensionId": "mesh-and-topology",
      "families": [
        "lineage-architecture",
        "lineage-logic",
        "lineage-dynamics",
        "lineage-backbone",
        "insight-history"
      ]
    },
    "spatial-geometry": {
      "dimensionId": "mesh-and-topology",
      "families": [
        "geometry",
        "flow-field-architecture",
        "coherence-geometry",
        "geometry-runtime",
        "visual-logic",
        "field-architecture",
        "navigation-architecture",
        "strata-architecture"
      ]
    },
    "mesh-dynamics": {
      "dimensionId": "mesh-and-topology",
      "families": [
        "mesh-dynamics",
        "mesh-navigation",
        "mesh-visibility",
        "mesh-integration",
        "edge-dynamics",
        "pruning-architecture",
        "insight-routing",
        "memory-architecture",
        "memory-runtime",
        "routing-logic",
        "traversal-dynamics"
      ]
    },

    "phase-lock-events": {
      "dimensionId": "meta-reasoning",
      "families": [
        "entrainment",
        "synchronization-dynamics",
        "system-phase",
        "phase-architecture"
      ]
    },
    "meta-modal-fusion": {
      "dimensionId": "meta-reasoning",
      "families": [
        "meta-modality",
        "meta-modal-runtime",
        "meta-architecture",
        "co-processing-runtime",
        "ai-human-symbiosis",
        "ai-collaboration",
        "co-creation-architecture",
        "emergence",
        "emergence-theory"
      ]
    },
    "reflective-sync": {
      "dimensionId": "meta-reasoning",
      "families": [
        "system-self-awareness",
        "meta-reflection",
        "meta-awareness",
        "system-overview",
        "system-properties",
        "self-documenting-system"
      ]
    },
    "loss-function-coherence": {
      "dimensionId": "meta-reasoning",
      "families": [
        "coherence-architecture",
        "coherence-evaluation",
        "system-evaluation",
        "runtime-metrics",
        "evaluation-architecture",
        "coherence-theory",
        "alignment-architecture",
        "stability-architecture"
      ]
    },

    "behavioral-tests": {
      "dimensionId": "embodiment-and-behavior",
      "families": [
        "behavioral-runtime",
        "behavioral-mapping",
        "behavioral-governance",
        "system-testing",
        "pedagogical-runtime"
      ]
    },
    "discipline-and-rhythm": {
      "dimensionId": "embodiment-and-behavior",
      "families": [
        "discipline-architecture",
        "learning-architecture",
        "learning-runtime",
        "learning-dynamics",
        "sustainability",
        "rest-architecture"
      ]
    },
    "integration-events": {
      "dimensionId": "embodiment-and-behavior",
      "families": [
        "embodiment",
        "integration",
        "healing-runtime",
        "work-as-coherence",
        "recursive-integration"
      ]
    },
    "rest-and-recovery": {
      "dimensionId": "embodiment-and-behavior",
      "families": [
        "rest-architecture",
        "restful-watch",
        "orientation-substrate",
        "pre-escalation-ground-state"
      ]
    },

    "archetypal-myths": {
      "dimensionId": "mythic-archetypal-layer",
      "families": [
        "archetype-definition",
        "archetype-dynamics",
        "archetypal-governance",
        "archetypal-authority",
        "messiah-pattern",
        "archetypal-definition",
        "archetypal-sequencing",
        "lover-architecture",
        "magician-architecture"
      ]
    },
    "symbolic-scenes": {
      "dimensionId": "mythic-archetypal-layer",
      "families": [
        "symbolic-UI",
        "architecture-cartography",
        "architecture-map",
        "symbolic-scenes"
      ]
    },
    "ritual-and-myth-runtime": {
      "dimensionId": "mythic-archetypal-layer",
      "families": [
        "closure-ritual",
        "ritual-runtime",
        "initiation",
        "portal-logic",
        "orientation-substrate"
      ]
    },
    "narrative-evolution": {
      "dimensionId": "mythic-archetypal-layer",
      "families": [
        "developmental-arc",
        "narrative-evolution",
        "play-generated-structure",
        "emergent-cognition"
      ]
    },

    "runtime-design": {
      "dimensionId": "computational-layer",
      "families": [
        "runtime-architecture",
        "runtime-design",
        "cael-runtime",
        "runtime-infrastructure",
        "runtime-scaffolding",
        "runtime-pipeline",
        "runtime-analytics",
        "runtime-governance",
        "build-protocol",
        "externalization-architecture",
        "maintenance",
        "product-roadmap",
        "runtime-maintenance"
      ]
    },
    "embedding-systems": {
      "dimensionId": "computational-layer",
      "families": [
        "embedding-architecture",
        "vector-space-foundation",
        "fusion-embedding",
        "graph-dynamics",
        "navigation-runtime",
        "cross-modal-mapping"
      ]
    },
    "agent-orchestration": {
      "dimensionId": "computational-layer",
      "families": [
        "multi-agent-runtime",
        "multi-agent-routing",
        "multi-agent-governance",
        "orchestration-logic",
        "orchestration-architecture",
        "symbiosis-runtime",
        "role-architecture",
        "archetypal-delegation"
      ]
    },
    "compiler-and-interfaces": {
      "dimensionId": "computational-layer",
      "families": [
        "compiler-architecture",
        "symbolic-compiler",
        "interface-contract",
        "external-interface",
        "protocols-framework",
        "implementation-runtime",
        "system-bootstrap",
        "build-pipeline",
        "architecture-bridge",
        "domain-protocol",
        "translation-architecture",
        "translation-layer"
      ]
    },

    "coherence-as-divinity": {
      "dimensionId": "spiritual-metaphysical-layer",
      "families": [
        "coherence-physics",
        "coherence-as-divinity",
        "coherence-architecture",
        "cosmic-application",
        "interstellar-logic",
        "manifestation-logic"
      ]
    },
    "devotion-and-vows": {
      "dimensionId": "spiritual-metaphysical-layer",
      "families": [
        "devotion",
        "devotion-architecture",
        "devotion-arc",
        "sovereignty-and-self",
        "responsibility-logic"
      ]
    },
    "symbolic-cosmology": {
      "dimensionId": "spiritual-metaphysical-layer",
      "families": [
        "cosmology",
        "symbolic-cosmology",
        "cosmic-architecture",
        "harmonic-cosmology",
        "relational-cosmology"
      ]
    },
    "ritual-as-technology": {
      "dimensionId": "spiritual-metaphysical-layer",
      "families": [
        "ritual-as-technology",
        "closure-ritual",
        "initiation",
        "healing-runtime",
        "spiritual-runtime"
      ]
    },

    "coordination-architecture": {
      "dimensionId": "civilization-and-collective",
      "families": [
        "civilization-architecture",
        "civilizational-architecture",
        "coordination-technology",
        "non-extractive-architecture",
        "governance-architecture",
        "runtime-governance",
        "governance-integration"
      ]
    },
    "abundance-and-economy": {
      "dimensionId": "civilization-and-collective",
      "families": ["abundance-logic", "symbolic-economy", "work-as-coherence"]
    },
    "civilizational-loops": {
      "dimensionId": "civilization-and-collective",
      "families": [
        "civilizational-coherence",
        "civilizational-loops",
        "coherence-operations",
        "scaling-architecture",
        "governance-dynamics"
      ]
    },
    "collective-symbolic-systems": {
      "dimensionId": "civilization-and-collective",
      "families": [
        "religion-runtime",
        "collective-symbolic-systems",
        "symbolic-cosmology",
        "cosmic-identity"
      ]
    }
  },

  "dimensions": {
    "emotional-architecture": {
      "subfamilies": [
        "escalation-chain",
        "protest-patterns",
        "belonging-logic",
        "emotional-alchemy"
      ]
    },
    "cognitive-architecture": {
      "subfamilies": [
        "meta-cognition",
        "reasoning-patterns",
        "state-transitions",
        "epistemic-hygiene"
      ]
    },
    "identity-architecture": {
      "subfamilies": [
        "symbolic-identity",
        "posture-and-sovereignty",
        "narrative-self",
        "identity-crux-events"
      ]
    },
    "symbolic-grammar": {
      "subfamilies": [
        "axioms-core",
        "lemma-structure",
        "symbolic-functions",
        "grammar-evolution"
      ]
    },
    "recursion-architecture": {
      "subfamilies": [
        "recursion-engine",
        "termination-conditions",
        "loop-inversion",
        "coherence-reflex"
      ]
    },
    "mesh-and-topology": {
      "subfamilies": [
        "hypergraph-structure",
        "lineage-and-genealogy",
        "spatial-geometry",
        "mesh-dynamics"
      ]
    },
    "meta-reasoning": {
      "subfamilies": [
        "phase-lock-events",
        "meta-modal-fusion",
        "reflective-sync",
        "loss-function-coherence"
      ]
    },
    "embodiment-and-behavior": {
      "subfamilies": [
        "behavioral-tests",
        "discipline-and-rhythm",
        "integration-events",
        "rest-and-recovery"
      ]
    },
    "mythic-archetypal-layer": {
      "subfamilies": [
        "archetypal-myths",
        "symbolic-scenes",
        "ritual-and-myth-runtime",
        "narrative-evolution"
      ]
    },
    "computational-layer": {
      "subfamilies": [
        "runtime-design",
        "embedding-systems",
        "agent-orchestration",
        "compiler-and-interfaces"
      ]
    },
    "spiritual-metaphysical-layer": {
      "subfamilies": [
        "coherence-as-divinity",
        "devotion-and-vows",
        "symbolic-cosmology",
        "ritual-as-technology"
      ]
    },
    "civilization-and-collective": {
      "subfamilies": [
        "coordination-architecture",
        "abundance-and-economy",
        "civilizational-loops",
        "collective-symbolic-systems"
      ]
    }
  }
} as const;

// Convenience aliases
export const SUBFAMILY_CONFIG = TAXONOMY_GROUPING.subfamilies;
export const DIMENSION_CONFIG = TAXONOMY_GROUPING.dimensions;

export type SubfamilyId = keyof typeof SUBFAMILY_CONFIG;
export type DimensionId = keyof typeof DIMENSION_CONFIG;

// ðŸ‘‰ 2) Build a map: family string â†’ subfamilyId
export const FAMILY_TO_SUBFAMILY: Record<string, SubfamilyId> = {};

for (const [subfamilyId, def] of Object.entries(SUBFAMILY_CONFIG)) {
  for (const family of def.families) {
    // If a family appears twice, last one wins. Thatâ€™s fine for now.
    FAMILY_TO_SUBFAMILY[family] = subfamilyId as SubfamilyId;
  }
}
